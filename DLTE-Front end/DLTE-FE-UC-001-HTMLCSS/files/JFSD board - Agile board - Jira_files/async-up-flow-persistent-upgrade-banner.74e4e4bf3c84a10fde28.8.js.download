try{window.performance.mark("async-up-flow-persistent-upgrade-banner.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-up-flow-persistent-upgrade-banner"],{"8m3F":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(a("q1tI")),n=a("QEuf");const i=e=>r.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M15.185 7.4l-3.184 3.185-3.186-3.186a.507.507 0 00-.712.003l-.7.701a.496.496 0 00-.004.712l3.185 3.184L7.4 15.185a.507.507 0 00.004.712l.7.7c.206.207.516.2.712.004l3.186-3.185 3.184 3.185a.507.507 0 00.712-.004l.701-.7a.496.496 0 00.003-.712l-3.186-3.186 3.186-3.184a.507.507 0 00-.003-.712l-.7-.7a.508.508 0 00-.36-.153.5.5 0 00-.353.15z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));i.displayName="EditorCloseIcon";var l=i;t.default=l},"94xy":function(e,t,a){
"use strict";var r=a("3tO9"),n=a.n(r),i=a("pVnL"),l=a.n(i),o=a("q1tI"),s=a("qKvR");const d=Object(a("7w+A").gridSize)(),p=6.5*d,c=Object(s.c)({display:"flex",alignItems:"center",flex:"0 0 auto",flexDirection:"column","@media screen and (forced-colors: active)":{fill:"CanvasText",filter:"grayscale(100%)"}}),u=Object(s.c)({overflow:"hidden"}),y=Object(s.c)({display:"flex",margin:"auto",padding:1.5*d,alignItems:"center",justifyContent:"start",color:"currentColor",fontWeight:500,textAlign:"center","a, a:visited, a:hover, a:focus, a:active":{color:"currentColor",textDecoration:"underline"}}),g=Object(s.c)({padding:d/2,flex:"0 1 auto",alignSelf:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),f=Object(s.c)({maxHeight:p}),b={warning:{backgroundColor:"var(--ds-background-warning-bold, #FFAB00)",color:"var(--ds-text-warning-inverse, #253858)"},error:{backgroundColor:"var(--ds-background-danger-bold, #DE350B)",color:"var(--ds-text-inverse, #FFFFFF)"},announcement:{
backgroundColor:"var(--ds-background-neutral-bold, #42526E)",color:"var(--ds-text-inverse, #FFFFFF)"}};t.a=({appearance:e="warning",children:t,icon:a,isOpen:r=!1,innerRef:i,testId:d})=>{const[p,h]=Object(o.useState)(0),w=Object(o.useCallback)((e=>{e&&(i&&i(e),h(e.clientHeight))}),[i]),m=Object(o.useMemo)((()=>{let t={"aria-hidden":!r,role:"alert"};return"announcement"===e?n()(n()({},t),{},{"aria-label":"announcement",tabIndex:0,role:"region"}):t}),[r,e]);return Object(s.d)("div",{css:u,style:{maxHeight:`${r?p:0}px`},"data-testid":d},Object(s.d)("div",l()({css:[f],style:n()({},b[e]),ref:w},m),Object(s.d)("div",{css:[y]},Object(s.d)("span",{css:c,style:{fill:b[e].backgroundColor}},a),Object(s.d)("span",{css:[g]},t))))}},AZeC:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const r={renderUpflowModal:!1,product:"jira-software",touchpointId:"",flow:"learn-more",onClose:()=>{},targetEdition:a("8n/F").a},n=Object(a("0b8M").a)({name:"upflow-modal-store",initialState:r,actions:{
mountUpflowModal:({targetEdition:e,product:t,flow:a,touchpointId:r,subRoute:n,onClose:i,onOpen:l})=>({setState:o})=>{o({targetEdition:e,product:t,flow:a,touchpointId:r,subRoute:n,onClose:i,onOpen:l,renderUpflowModal:!0})},unMountUpflowModal:()=>({setState:e})=>{e({renderUpflowModal:!1})}}}),i=(Object(a("Y6nV").a)(n),Object(a("UCyb").a)(n),Object(a("dq9g").b)(n))},DWq1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(a("q1tI")),n=a("QEuf");const i=e=>r.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><path d="M12.938 4.967c-.518-.978-1.36-.974-1.876 0L3.938 18.425c-.518.978-.045 1.771 1.057 1.771h14.01c1.102 0 1.573-.797 1.057-1.771L12.938 4.967z" fill="currentColor"/><path d="M12 15a1 1 0 01-1-1V9a1 1 0 012 0v5a1 1 0 01-1 1m0 3a1 1 0 010-2 1 1 0 010 2" fill="inherit"/></g></svg>'
},e));i.displayName="WarningIcon";var l=i;t.default=l},GKBH:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("q1tI"),n=a.n(r);const i=({id:e,defaultMessage:t,description:r,values:i,tagName:l,children:o})=>n.a.createElement(a("3e7Q").a,{values:i,id:e,tagName:l,description:r,defaultMessage:t},o);i.displayName="FormattedMessageV2",i.displayName="FormattedMessage"},KMsT:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o}));var r=a("3tO9"),n=a.n(r);const i=(e,t,a)=>`/rest/api/latest/user/properties/${a}?accountId=${encodeURIComponent(t)}`,l=async(e,t,r,l)=>fetch(i(e,t,r),n()(n()({},a("ToaA").a),{},{method:"PUT",body:l})),o=(e,t,r)=>fetch(i(e,t,r),a("ToaA").a).then((e=>200===e.status?e.json():e.text().then((t=>{throw new(a("zBNx").a)(e.status,t)})))).then((e=>e.value))},WVn2:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}))
;const r=(e,t)=>e===a("0aDK").f?t.appEditions.software:e===a("0aDK").e?t.appEditions.serviceDesk:t.appEditions.core},jZDa:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=()=>{const[{data:e}]=Object(a("Suqb").a)();return null!=e&&e.project?Object(a("g8Re").a)(e.project.type):null}},jiGI:function(t,a,r){"use strict";r.r(a),r.d(a,"BannerContent",(function(){return T}));var n=r("q1tI"),i=r.n(n);const l=e=>r("tOyG").m+e,o=e=>({growthFeature:r("tOyG").k,touchpointId:l(e),flowId:r("tOyG").l}),s={trialStage:r("tOyG").m,index:-1,displayNextAt:(new Date).toISOString(),loading:!1,showBanner:!1,hasError:!1},d=e=>e===r("0aDK").f?r("tOyG").h:r("tOyG").g,p={initializeState:(t,a,n)=>async({setState:i,getState:o},{product:s})=>{if(!0===o().loading)return;const p=d(s),c={growthFeature:r("tOyG").k,touchpointId:l(o().index),flowId:r("tOyG").l};i({loading:!0});try{const e=await Object(r("KMsT").b)(t,a,p);if(e){i({loading:!1,index:e.index,displayNextAt:e.displayNextAt,
trialStage:e.trialStage,showBanner:!0});const t=n({type:r("tOyG").q,action:r("tOyG").b,actionSubject:r("tOyG").d,actionSubjectId:r("tOyG").n});Object(r("SALc").b)(t,r("tOyG").f,c)}}catch(e){if(404===e.statusCode){i({loading:!1,index:0,showBanner:!0});const e=n({type:r("tOyG").q,action:r("tOyG").b,actionSubject:r("tOyG").d,actionSubjectId:r("tOyG").n});Object(r("SALc").b)(e,r("tOyG").f,c)}else{i({loading:!1,showBanner:!1,hasError:!0});const a=n({type:r("tOyG").q,action:r("tOyG").a,actionSubject:r("tOyG").d,actionSubjectId:r("tOyG").n});Object(r("SALc").b)(a,r("tOyG").e,{growthFeature:r("tOyG").k,touchpointId:l(o().index),flowId:r("tOyG").l,errorMessage:e.message,errorStatus:e.statusCode})}}},updateState:(t,a,n,i)=>async({setState:o,getState:s},{product:p})=>{const c=d(p),u=new Date,y={growthFeature:r("tOyG").k,touchpointId:l(s().index),flowId:r("tOyG").l};o({index:s().index+1,displayNextAt:new Date(u.getTime()+r("tOyG").j[s().index>=3?s().index:s().index+1]).toISOString(),trialStage:n})
;const g={index:s().index,displayNextAt:s().displayNextAt,trialStage:s().trialStage};try{await Object(r("KMsT").c)(t,a,c,JSON.stringify(g)).then((()=>{const e=i({type:r("tOyG").q,action:r("tOyG").b,actionSubject:r("tOyG").r,actionSubjectId:r("tOyG").n});Object(r("SALc").b)(e,r("tOyG").t,y)}))}catch(e){o({showBanner:!1,hasError:!0});const a=i({type:r("tOyG").q,action:r("tOyG").a,actionSubject:r("tOyG").r,actionSubjectId:r("tOyG").n});Object(r("SALc").b)(a,r("tOyG").s,{growthFeature:r("tOyG").k,touchpointId:l(s().index),flowId:r("tOyG").l,errorMessage:e.message,errorStatus:e.statusCode})}}},c=Object(r("0b8M").a)({name:r("tOyG").c,initialState:s,actions:p}),u=Object(r("UCyb").a)(c),y=Object(r("dq9g").b)(c);var g=r("vOnD");const f=g.default.div.withConfig({componentId:"q84uzs-0"
})`padding:${e=>e.isFullWidth?"10px 0px":"10px 40px"};white-space:nowrap;overflow:hidden;text-overflow:ellipsis;& *{max-height:32px !important;padding:${e=>e.isWarning?"1px !important":"2px !important"};}`,b=g.default.div.withConfig({componentId:"sc-18uojjg-0"})`height:24px;width:24px;cursor:pointer;margin-top:${e=>e.isWarning?"-31px":"-34px"};margin-right:5px;float:right;position:relative;z-index:1;background-color:${e=>e.isWarning?"var(--ds-background-warning-bold, #FFAB00)":"var(--ds-background-neutral-bold, #42526E)"};color:${e=>e.isWarning?"var(--ds-icon-warning-inverse, #253858)":"var(--ds-icon-inverse, #FFFFFF)"};&:hover{color:${"var(--ds-interaction-hovered, #8993A4)"};}`;var h=({isWarning:e=!1,children:t,onDismiss:a=(()=>{})})=>{const l=Object(n.useCallback)((e=>{e&&(e.style.overflow="hidden",e.children.length>0&&(e.children[0].style.maxWidth="1200px"))}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(r("94xy").a,{
testId:"up-flow-persistent-upgrade-banner.ui.dismissible-banner.ak-banner"+(e?"-warning":""),innerRef:l,appearance:e?"warning":"announcement",icon:e?i.a.createElement(r.n(r("DWq1")).a,{label:"Warning icon",secondaryColor:"inherit"}):void 0,isOpen:!0},t),i.a.createElement(b,{role:"button","aria-label":"dismiss",isWarning:e,onClick:a,"data-testid":"up-flow-persistent-upgrade-banner.ui.dismissible-banner.banner-dismiss-button"},i.a.createElement(r.n(r("8m3F")).a,null)))},w=r("pVnL"),m=r.n(w),x=Object(r("D6b/").defineMessages)({preTrialDay0:{defaultMessage:"Does your team need more from Jira? {preTrialDayXLink}",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0",description:"Pre-trial day 0 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-link'"},preTrialDay0Link:{
defaultMessage:"Get a free trial of our Standard plan.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-link",description:"Banner upgrade link for pre trial day 0"},preTrialDay7:{defaultMessage:"Set project and issue permissions. {preTrialDayXLink}",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7",description:"Pre-trial day 7 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-link'"},preTrialDay7Link:{defaultMessage:"Try it in a {trialLength, plural, one {#-day} other {#-day}} trial of Jira Software Standard.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-link",description:"Banner upgrade link for pre trial day 7"},preTrialDay21:{
defaultMessage:"You\u2019re eligible for a free {trialLength, plural, one {#-day} other {#-day}} trial of our Jira Software Standard plan. {preTrialDayXLink}",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21",description:"Pre-trial day 21 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-link'"},preTrialDay21Link:{defaultMessage:"Start now!",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-link",description:"Banner upgrade link for pre trial day 21"},preTrialDay42:{defaultMessage:"Unlock more features with a free {trialLength, plural, one {#-day} other {#-day}} {preTrialDayXLink}.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42",
description:"Pre-trial day 42 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-link'"},preTrialDay42Link:{defaultMessage:"trial of Jira Software Standard",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-link",description:"Banner upgrade link for pre trial day 42"},default:{defaultMessage:"Enjoy Jira Software.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.default",description:"default message"},preTrialDay0Jsm:{defaultMessage:"Unlock new features with a free {preTrialDayXLink}.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-jsm",
description:"Pre-trial day 0 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-link-jsm'"},preTrialDay0LinkJsm:{defaultMessage:"{trialLength, plural, one {#-day} other {#-day}} trial of Jira Service Management Standard",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-0-link-jsm",description:"Banner upgrade link for pre trial day 0"},preTrialDay7Jsm:{defaultMessage:"Need more ways to deliver service? {preTrialDayXLink}",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-jsm",description:"Pre-trial day 7 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-link-jsm'"},preTrialDay7LinkJsm:{
defaultMessage:"Get a free upgrade to Jira Service Management Standard for {trialLength, plural, one {#-day} other {#-days}}.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-7-link-jsm",description:"Banner upgrade link for pre trial day 7"},preTrialDay21Jsm:{defaultMessage:"You\u2019re eligible for a free {trialLength, plural, one {#-day} other {#-day}} trial of our Jira Service Management Standard plan. {preTrialDayXLink}",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-jsm",description:"Pre-trial day 21 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-link-jsm'"},preTrialDay21LinkJsm:{defaultMessage:"Start now!",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-21-link-jsm",description:"Banner upgrade link for pre trial day 21"},
preTrialDay42Jsm:{defaultMessage:"Unlock more features with a free {trialLength, plural, one {#-day} other {#-day}} {preTrialDayXLink}.",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-jsm",description:"Pre-trial day 42 text displayed in a banner at the top of the screen encouraging upgrade, where preTrialDayXLink is a link whose text translated via the ID 'up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-link-jsm'"},preTrialDay42LinkJsm:{defaultMessage:"trial of Jira Service Management",id:"up-flow-persistent-upgrade-banner.pre-trial-banner-text.pre-trial-day-42-link-jsm",description:"Banner upgrade link for pre trial day 42"}});const O=g.default.a.withConfig({componentId:"sc-1ck6up1-0"
})`color:${"var(--ds-text-inverse, #FFFFFF)"};text-decoration:underline;cursor:pointer;white-space:nowrap;&:hover{color:${"var(--ds-text-inverse, #FFFFFF)"};}`,k=["preTrialDay0","preTrialDay7","preTrialDay21","preTrialDay42"],D=["preTrialDay0Link","preTrialDay7Link","preTrialDay21Link","preTrialDay42Link"],v=["preTrialDay0Jsm","preTrialDay7Jsm","preTrialDay21Jsm","preTrialDay42Jsm"],j=["preTrialDay0LinkJsm","preTrialDay7LinkJsm","preTrialDay21LinkJsm","preTrialDay42LinkJsm"],S=({cadenceIndex:e=-1,onBannerClick:t=(()=>{}),useIntl:a=r("6JHv").a,product:l,trialLength:o})=>{const{formatMessage:s}=a(),d=l===r("0aDK").f?D:j,p=l===r("0aDK").f?k:v,c=Object(n.useCallback)((()=>i.a.createElement(O,{onClick:t,href:"",target:"","data-testid":"persistent-upgrade-banner-link"},s(x[d[e]],{trialLength:o}))),[d,e,s,t,o]);return e>=0&&e<=r("tOyG").i?i.a.createElement(r("GKBH").a,m()({},x[p[e]],{values:{trialLength:o,preTrialDayXLink:c()}})):i.a.createElement(r("GKBH").a,x.default)}
;S.displayName="PreTrialBannerText";var G=S;const T=({isFullWidth:e=!1,useIntl:t=r("6JHv").a,useUpflowModal:a=r("AZeC").a,product:s})=>{const d=Object(r("QwAD").c)(),[p,c]=y(),{createAnalyticsEvent:u}=Object(r("rZ/p").a)(),[,{mountUpflowModal:g}]=a(),[b,w]=Object(n.useState)(!1),{atlassianAccountId:m,baseUrl:x}=d,O=Object(r("WVn2").a)(s,d),k=O===r("8n/F").a,D=p.showBanner&&Date.now()>=new Date(p.displayNextAt)&&p.index<=r("tOyG").i,v=k&&!b&&D,j=Object(r("qh1S").a)(O,r("8n/F").c),S={growthFeature:r("tOyG").k,touchpointId:l(p.index),flowId:r("tOyG").l},T=Object(n.useCallback)((e=>{const t=u({action:"clicked",actionSubject:r("tOyG").n});Object(r("SALc").h)(t,"bannerLinkClicked",S),e.preventDefault(),g({targetEdition:r("8n/F").c,product:s,flow:r("tOyG").p,touchpointId:l(p.index)})}),[S,u,g,s,p.index]),I=Object(n.useCallback)((()=>{const e=u({action:"dismissed",actionSubject:r("tOyG").n});Object(r("SALc").h)(e,"bannerCloseClicked",S),m&&c.updateState(x,m,r("tOyG").m,u)}),[u,S,m,c,x])
;return Object(n.useEffect)((()=>{-1===p.index&&!p.hasError&&k&&m&&c.initializeState(x,m,u)}),[p,c,x,m,u,k]),v?i.a.createElement(f,{isFullWidth:e,hidden:p.loading},i.a.createElement(r("dY08").d,{eventName:r("tOyG").o,attributes:o(p.index)}),i.a.createElement(h,{onDismiss:()=>{w(!0),I()}},i.a.createElement(G,{cadenceIndex:p.index,onBannerClick:T,useIntl:t,product:s,trialLength:j}))):null},I=({isBannerEnabled:e=!1,isFullWidth:t=!1,useIntl:a=r("6JHv").a,useUpflowModal:n=r("AZeC").a})=>{const l=Object(r("QwAD").c)(),{isSiteAdmin:o}=l,s=Object(r("rAuE").a)(l),d=((e,t)=>{if("software"===e)return r("0aDK").f;if("serviceDesk"===e)return r("0aDK").e;if(1===t.length){if(t[0]===r("0aDK").f)return r("0aDK").f;if(t[0]===r("0aDK").e)return r("0aDK").e}return null})(Object(r("jZDa").a)(),s);return d&&e&&o?i.a.createElement(r("qAQD").a,{id:r("tOyG").k,packageName:r("tOyG").n,render:()=>null},i.a.createElement(r("E/iH").a,{id:r("tOyG").k,packageName:r("tOyG").n},i.a.createElement(u,{scope:d,product:d
},i.a.createElement(T,{isFullWidth:t,useIntl:a,useUpflowModal:n,product:d})))):null};I.displayName="PersistentUpgradeBanner";a.default=I},qh1S:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=(e,t)=>e===a("8n/F").a&&t===a("8n/F").c?14:30},rAuE:function(e,t,a){"use strict";t.a=e=>{const t=e.licensedProducts,r=[];return t[a("0aDK").b]&&r.push(a("0aDK").b),t[a("0aDK").e]&&r.push(a("0aDK").e),t[a("0aDK").f]&&r.push(a("0aDK").f),r}}}]);try{window.__jsEvalStop("async-up-flow-persistent-upgrade-banner.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-up-flow-persistent-upgrade-banner.74e4e4bf3c84a10fde28.8.js.map