try{window.performance.mark("create-payloads.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["create-payloads"],{yAeC:function(e,t,n){"use strict";n.r(t),n.d(t,"getPerformanceForRoot",(function(){return K})),n.d(t,"createSegmentPayload",(function(){return E})),n.d(t,"createPayloads",(function(){return N}));var r=n("3tO9"),a=n.n(r),o=n("TEf6"),s=n.n(o);const i=e=>{const{type:t,name:n,labelStack:r}=e;return r&&r.length>0?`${t}/${r.join("/")}/${n}`:`${t}/${n}`},c=e=>a()({startTime:Object(n("O4zK").a)(e.start),duration:Object(n("O4zK").a)(e.end-e.start)},e.size?{size:e.size}:{}),u=(e,t)=>{const r=((e,t)=>{const n={};for(let r=0;r<e.length;r++){const a=e[r];if(a.start<t)continue;const o=i(a),s=n[o];s&&s.start<a.start||(n[o]=a)}return n})(e,t);return((e,t)=>{const r={},o=Object.keys(e);for(let s=0;s<o.length;s++){const i=o[s],u=e[i],l=a()(a()({},u),{},{start:u.start-t,end:u.end-t});r[i]=c(l);const{type:m}=l,d=r[m];if(d){
const e=Math.min(d.startTime,r[i].startTime),t=Math.max(d.startTime+d.duration,l.end);d.startTime=Object(n("O4zK").a)(e),d.duration=Object(n("O4zK").a)(t-e)}else r[m]=c(l)}return r})(r,t)},l=e=>e.reduce(((e,t)=>{const n=i(t),r=e[n];return void 0!==r?r.push(c(t)):e[n]=[c(t)],e}),{}),m=e=>"press"===e?"inline-result":"transition"===e?"page-load":e.replace(/_/g,"-"),d=e=>`ufo-${e.replace(/_/g,"-")}`,p=(e,t)=>`jira.fe.${m(e)}.${d(t)}`,g=e=>"transition"===e?e:"initial",v=(e,t)=>null!=e&&null!=t&&e.every(((e,n)=>e===t[n])),f=(e,t,n)=>0===e.length?Math.round(t-n):Math.round(Math.max(...e.map((e=>e.end)))-n),y=(e,t)=>{const r={};return t.length>0&&"number"==typeof t[0].stopTime&&(r[`apdex_${t[0].key}`]={startTime:Object(n("O4zK").a)(e),duration:Object(n("O4zK").a)(t[0].stopTime-e)}),r},b=(e,t)=>{const r={},a=null==t?void 0:t.lifecycle.slice().sort(((e,t)=>e.time>t.time?1:-1));return null==a||a.forEach((({time:t,type:a})=>{const o=Object(n("O4zK").a)(t-e),s={startTime:0,duration:o}
;o>=0&&(r[`${a}_sync`]=r[`${a}_sync`]||s,r[`${a}_sync`].duration!==o&&(r[`${a}_async`]=s))})),r},h=(e,t)=>Object(n("owDO").a)(e,t),k=(e,t)=>{var r;return null!==(r=n("Ynez").b(e,t))&&void 0!==r?r:void 0},w=e=>n("k6XK").b(e),_=e=>"page_load"===e?n("xbga").d():void 0,x=e=>"page_load"===e?n("xbga").c():void 0,O=e=>"page_load"===e?n("xbga").e():{},M=e=>((e,t,n,r,a)=>{var o;let s=null===(o=e.find((e=>"fmp"===e.name)))||void 0===o?void 0:o.time;s||"page_load"!==t||(s=a());const i="number"==typeof s?s:r;return Math.round(i-n)})(e.marks,e.type,e.start,e.end,n("xbga").b);const j=e=>e.map((e=>a()(a()({},e),{},{time:Object(n("O4zK").a)(e.time)})));function T(e){const{metaData:t,errors:n,holds:r,apdex:o,marks:s,segmentMetrics:i,spans:c,labelStack:u,featureFlags:m,reactProfilerTimings:d,requestInfo:p}=e;return a()(a()({},t),{},{errors:n,holds:Array.from(r),apdex:o,reactProfilerTimings:d,requestInfo:p,marks:j(s),segmentMetrics:i,spans:l(c),labelStack:u,featureFlags:m})}const S=(e,t,n)=>({
actionSubject:"experience",action:"measured",source:"measured",tags:["observability"],attributes:{properties:e,performance:t,task:n}});function $(e,t,n){return a()(a()({"experience:startTime":Math.round(n),"experience:name":d(e),"experience:key":p(t,e)},(()=>{const e={};if(null!=navigator.userAgent){const t=s.a.getParser(navigator.userAgent);e["event:browser:name"]=t.getBrowserName(),e["event:browser:version"]=t.getBrowserVersion()}return null!=navigator.hardwareConcurrency&&(e["event:cpus"]=navigator.hardwareConcurrency),null!=navigator.deviceMemory&&(e["event:memory"]=navigator.deviceMemory),null!=navigator.connection?{"event:network:effectiveType":navigator.connection.effectiveType,"event:network:rtt":navigator.connection.rtt,"event:network:downlink":navigator.connection.downlink}:e})()),function(e){return{"ssr:success":_(e),"ssr:featureFlags":x(e)}}(t))}const z=(e,t)=>{if(e&&e.name===t)return e;for(let n=0;n<((null==e?void 0:e.segments)||[]).length;n++){
const r=((null==e?void 0:e.segments)||[])[n],a=z(r,t);if(a)return a}},K=(e,t)=>{const{start:n,end:r,type:o,ufoName:s,spans:i,apdex:c,segmentMetrics:l}=e,d=((e,t,n)=>{if(void 0===t)return n;const r=z(e,t.segment);var a,o;return r&&null!==(a=null===(o=r.lifecycle.find((e=>e.type===t.lifecycleMarker)))||void 0===o?void 0:o.time)&&void 0!==a?a:n})(l,t,r);let g=null;return g="press"===o?((e,t)=>({"metric:response":Math.round(t-e),"metric:result":Math.round(t-e),"metric:response:histogramBuckets":"50_100_150_200_300_500","metric:result:histogramBuckets":"100_200_500_1000_1500"}))(n,d):a()({"metric:fmp":M(e)},((e,t)=>({"metric:tti":Math.round(t-e),"metric:duration":Math.round(t-e)}))(n,d)),a()({"event:key":p(o,s),"event:type":m(o),"timings:app":a()(a()(a()(a()({},u(i,n)),O(o)),y(n,c)),b(n,l)),"timings:bundleEval":w(n),"timings:resource":k(n,r),"custom:metadata":T(e)},g)},E=(e,t,n,r)=>{const{name:o,labelStack:s,start:i,end:c}=r;if(void 0!==i&&void 0!==c){const m=((e,t)=>({
"experience:startTime":Math.round(t),"experience:name":d(e),"experience:key":p("page-segment-load",e)}))(o,i),g=((e,t)=>e.filter((e=>v(t,e.labelStack))).map((e=>{var n;return a()(a()({},e),{},{labelStack:(null===(n=e.labelStack)||void 0===n?void 0:n.slice(null==t?void 0:t.length))||null})})))(e,s),y=((e,t)=>e.filter((e=>v(t,e.labelStack))))(t,s),h=((e,t,n,r,o,s,i)=>({"event:key":p("page-segment-load",e),"event:type":"page-segment-load","metric:tti":f(n,s,o),"timings:app":a()(a()({},u(n,o)),b(o,i)),"custom:metadata":{marks:j(r),labelStack:t,spans:l(n),segmentMetrics:i}}))(o,s,g,y,i,c,r),k=d(o);return S(a()(a()({},n),m),h,k)}};function N(e,t,r={}){const{ufoName:o,rate:s,type:i,start:c,end:u,abortReason:l,routeName:m}=t,p=r[m||""],v=function(e,t){var n;const{ufoName:r,rate:a,type:o,start:s,end:i,abortReason:c,routeName:u}=e;return{"custom:ufoKey":r,"custom:rate":a,"event:source":{name:"ufo/web",version:"1.0.0"},"event:schema":"1.0.0","event:product":"jira","event:region":"unknown",
"event:hostname":(null===(n=window.location)||void 0===n?void 0:n.hostname)||"unknown","event:route":u,"experience:status":c?"ABORTED":"SUCCEEDED","experience:abortReason":c,"experience:spanId":t,"experience:pageVisible":h(s,i),"experience:pageLoadType":g(o)}}({ufoName:o,rate:s,type:i,start:c,end:u,abortReason:l,routeName:m},e),f=$(o,i,c),y=S(a()(a()({},v),f),K(t,p),d(o)),b=function(e,t){if(Object(n("qjgh").a)("nested_segment_payloads"))return[];const{spans:r,marks:a,segmentsById:o}=e,s=[];return o.forEach((n=>{if(30===s.length||((e,t)=>e===t)(n,e.segmentMetrics))return;const o=E(r,a,t,n);o&&s.push(o)})),s}(t,v);return[y].concat(b)}}}]);try{window.__jsEvalStop("create-payloads.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/create-payloads.bdd90810e24c72cdd453.8.js.map